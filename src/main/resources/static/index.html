<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Villes et Départements</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-city"></i> Gestion des Villes et Départements</h1>
            <p class="subtitle">Interface d'administration pour la gestion des données territoriales françaises</p>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="villes">
                <i class="fas fa-building"></i> Villes
            </button>
            <button class="tab-btn" data-tab="departements">
                <i class="fas fa-map"></i> Départements
            </button>
        </nav>

        <!-- Messages de feedback -->
        <div id="message" class="message hidden"></div>

        <!-- Section Villes -->
        <div id="villes-section" class="tab-content active">
            <div class="section-header">
                <h2><i class="fas fa-building"></i> Gestion des Villes</h2>
                <button class="btn btn-primary" onclick="showAddVilleForm()">
                    <i class="fas fa-plus"></i> Ajouter une ville
                </button>
            </div>

            <!-- Formulaire d'ajout/modification de ville -->
            <div id="ville-form-container" class="form-container hidden">
                <div class="form-header">
                    <h3 id="ville-form-title"><i class="fas fa-plus"></i> Ajouter une nouvelle ville</h3>
                    <button class="btn-close" onclick="hideVilleForm()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="ville-form">
                    <div class="form-group">
                        <label for="ville-nom"><i class="fas fa-city"></i> Nom de la ville</label>
                        <input type="text" id="ville-nom" name="nom" required 
                               placeholder="Ex: Paris, Lyon, Marseille..." maxlength="100">
                    </div>
                    <div class="form-group">
                        <label for="ville-habitants"><i class="fas fa-users"></i> Nombre d'habitants</label>
                        <input type="number" id="ville-habitants" name="nbHabitants" required 
                               min="1" max="50000000" placeholder="Ex: 2165423">
                    </div>
                    <div class="form-group">
                        <label for="ville-departement"><i class="fas fa-map-marker-alt"></i> Département</label>
                        <select id="ville-departement" name="departement" required>
                            <option value="">-- Sélectionner un département --</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Enregistrer
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="hideVilleForm()">
                            <i class="fas fa-times"></i> Annuler
                        </button>
                    </div>
                </form>
            </div>

            <!-- Filtres et recherche -->
            <div class="filters-container">
                <div class="search-group">
                    <i class="fas fa-search"></i>
                    <input type="text" id="ville-search" placeholder="Rechercher une ville..." onkeyup="filterVilles()">
                </div>
                <div class="filter-group">
                    <label for="departement-filter">Filtrer par département :</label>
                    <select id="departement-filter" onchange="filterVilles()">
                        <option value="">Tous les départements</option>
                    </select>
                </div>
                <div class="sort-group">
                    <label for="ville-sort">Trier par :</label>
                    <select id="ville-sort" onchange="sortVilles()">
                        <option value="nom-asc">Nom (A-Z)</option>
                        <option value="nom-desc">Nom (Z-A)</option>
                        <option value="population-asc">Population (croissant)</option>
                        <option value="population-desc">Population (décroissant)</option>
                        <option value="departement-asc">Département (A-Z)</option>
                        <option value="departement-desc">Département (Z-A)</option>
                    </select>
                </div>
            </div>

            <!-- Liste des villes -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><i class="fas fa-city"></i> Nom</th>
                            <th><i class="fas fa-users"></i> Population</th>
                            <th><i class="fas fa-map-marker-alt"></i> Département</th>
                            <th><i class="fas fa-cogs"></i> Actions</th>
                        </tr>
                    </thead>
                    <tbody id="villes-list">
                        <!-- Les villes seront chargées ici via JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div id="villes-pagination" class="pagination">
                <!-- Pagination générée dynamiquement -->
            </div>
        </div>

        <!-- Section Départements -->
        <div id="departements-section" class="tab-content">
            <div class="section-header">
                <h2><i class="fas fa-map"></i> Gestion des Départements</h2>
                <button class="btn btn-primary" onclick="showAddDepartementForm()">
                    <i class="fas fa-plus"></i> Ajouter un département
                </button>
            </div>

            <!-- Formulaire d'ajout/modification de département -->
            <div id="departement-form-container" class="form-container hidden">
                <div class="form-header">
                    <h3 id="departement-form-title"><i class="fas fa-plus"></i> Ajouter un nouveau département</h3>
                    <button class="btn-close" onclick="hideDepartementForm()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="departement-form">
                    <div class="form-group">
                        <label for="departement-code"><i class="fas fa-hashtag"></i> Code du département</label>
                        <input type="text" id="departement-code" name="code" required 
                               placeholder="Ex: 75, 13, 69..." maxlength="3" pattern="[0-9A-Z]{2,3}">
                    </div>
                    <div class="form-group">
                        <label for="departement-nom"><i class="fas fa-map"></i> Nom du département</label>
                        <input type="text" id="departement-nom" name="nom" required 
                               placeholder="Ex: Paris, Bouches-du-Rhône..." maxlength="100">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Enregistrer
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="hideDepartementForm()">
                            <i class="fas fa-times"></i> Annuler
                        </button>
                    </div>
                </form>
            </div>

            <!-- Statistiques des départements -->
            <div class="stats-container">
                <div class="stat-card">
                    <i class="fas fa-map"></i>
                    <div class="stat-content">
                        <h3 id="total-departements">0</h3>
                        <p>Départements</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-building"></i>
                    <div class="stat-content">
                        <h3 id="total-villes-stats">0</h3>
                        <p>Villes totales</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <div class="stat-content">
                        <h3 id="total-population">0</h3>
                        <p>Population totale</p>
                    </div>
                </div>
            </div>

            <!-- Filtres départements -->
            <div class="filters-container">
                <div class="search-group">
                    <i class="fas fa-search"></i>
                    <input type="text" id="departement-search" placeholder="Rechercher un département..." onkeyup="filterDepartements()">
                </div>
                <div class="sort-group">
                    <label for="departement-sort">Trier par :</label>
                    <select id="departement-sort" onchange="sortDepartements()">
                        <option value="nom">Nom</option>
                        <option value="code">Code</option>
                        <option value="population">Population</option>
                        <option value="nombreVilles">Nombre de villes</option>
                    </select>
                </div>
            </div>

            <!-- Liste des départements -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><i class="fas fa-hashtag"></i> Code</th>
                            <th><i class="fas fa-map"></i> Nom</th>
                            <th><i class="fas fa-building"></i> Villes</th>
                            <th><i class="fas fa-users"></i> Population</th>
                            <th><i class="fas fa-cogs"></i> Actions</th>
                        </tr>
                    </thead>
                    <tbody id="departements-list">
                        <!-- Les départements seront chargés ici via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Modal de confirmation -->
        <div id="confirm-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="confirm-title">Confirmation</h3>
                    <button class="btn-close" onclick="hideConfirmModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="confirm-message">Êtes-vous sûr de vouloir effectuer cette action ?</p>
                </div>
                <div class="modal-actions">
                    <button id="confirm-yes" class="btn btn-danger">
                        <i class="fas fa-check"></i> Confirmer
                    </button>
                    <button class="btn btn-secondary" onclick="hideConfirmModal()">
                        <i class="fas fa-times"></i> Annuler
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal de détail -->
        <div id="detail-modal" class="modal hidden">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3 id="detail-title">Détails</h3>
                    <button class="btn-close" onclick="hideDetailModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body" id="detail-content">
                    <!-- Contenu généré dynamiquement -->
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="hideDetailModal()">
                        <i class="fas fa-times"></i> Fermer
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading overlay -->
        <div id="loading" class="loading hidden">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Chargement en cours...</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>